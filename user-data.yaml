# user-data.yaml

# cloud-config
hostname: alpine-vm
password: alpine
chpasswd:
  expire: False
ssh_pwauth: True
write_files:
  - path: /etc/network/interfaces
    content: |
      auto lo
      iface lo inet loopback
      
      auto eth0
      iface eth0 inet dhcp
  - path: /etc/apk/repositories
    content: |
      https://dl-cdn.alpinelinux.org/alpine/v3.21/main
      https://dl-cdn.alpinelinux.org/alpine/v3.21/community
      
runcmd:
  - apk update
  - apk add bash curl openssh
  - rc-update add networking boot
  - rc-update add sshd default
  - rc-service networking restart
  - rc-service sshd restart
